<div class="filter-bar">
  <%= render 'filter' %>
</div>
<br>


<div class="venues-index-container">
  <div style="overflow-y: auto; margin-top: 100px;">
    <div class="row">
      <div class="col-xs-8">
        <% @venues_with_coordinates.each do |venue| %>
          <div class="col-sm-6" >
            <div class="card_2" style="background-image: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.2)),
      url('<%= cl_image_path venue.photos.first.path if venue.photos.first %>')">
              <div class="card-category-2">
                <%= venue.city %>

              </div>
              <div class="card-description-2">
                <%= venue.price %> â‚¬/h
              </div>
              <div class="card-description-2">
                <h1>
                  <%= venue.name %>
                </h1>
              </div>
              <div class="card-description-title" >
                <%= truncate(venue.description, length: 40) %>
                <div>
                  <i class="fa fa-users" aria-hidden="true" style="color: grey"></i>
                  <%= venue.capacity %>
                </div>
                <div>
                  <%= simple_form_for(@bookmark, url: bookmarks_path, html: {method: :post}) do |f| %>
                  <%= f.hidden_field :venue_id, value: venue.id %>
                    <button class="btn btn-success" type='submit'>
                      <i class="fa fa-heart" aria-hidden="true"></i>
                    </button>
                  <% end %>
                </div>
                <div class = "btn-description" style="text-align: center;">
                  <%= link_to "View Venue", venue_path(venue), class: "btn-normal" %>
                </div>
              </div>
              <br>


            </div>
          </div>
        <% end %>

        <!--   </div>
          <br>
          <a> <%= link_to venue.name, venue_path(venue), class: "card-link-2" %></a>
        </div> -->

      </div>
    </div>
  </div>

  <div class="map" style="width: 35%; top:105px; position: fixed; right: 0; " >


  <!-- <div class="map" style="width: 40%; top:105px; position: fixed; right: 0; " >
    <div> -->

<!-- <div style="position: fixed; top:0">
-->     <div id="map" style="width: 100%; height: 720px;"></div>
      <% content_for(:after_js) do %>
        <%= javascript_tag do %>
        $(document).ready(function() {
          var handler = Gmaps.build('Google');
          handler.buildMap({
          provider: {},
          internal: { id: 'map' } }, function() {
            markers = handler.addMarkers(<%= raw @hash.to_json %>);
            handler.bounds.extendWith(markers);
            handler.fitMapToBounds();
            if (markers.length == 0) {
            handler.getMap().setZoom(2);
            } else if (markers.length == 1) {
            handler.getMap().setZoom(14);
            }
          });
        });
      <% end %>
    <% end %>
  </div>
</div>

